import{b as d,c as h,a as o,P as a,H as n,O as k,ag as l,o as C,V as R,L as f,u as p,M as r,K as A,i as F}from"./@vue-o39Kj8Hc.js";import{_ as L,a as O}from"./index-Di0cqdVb.js";import{u as B}from"./vue-router-B5Ds_jdF.js";import"./pinia-DRS-luHF.js";import"./vue-demi-Dq6ymT-8.js";import"./element-plus-DqxZfY1O.js";import"./lodash-es-DpRhkxuT.js";import"./@vueuse-2MWXcMyd.js";import"./@element-plus-B683oq9Q.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-Cvt7qOjS.js";import"./artplayer-DYEsUqgO.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DVIT0l11.js";import"./vue-cookies-DmNBPvI0.js";import"./vue-cropper-B5nAOkqF.js";import"./mitt-DJ65BbbF.js";import"./hls.js-DnSDjNdB.js";import"./artplayer-plugin-danmuku-CU64Le-w.js";import"./axios-upsvKRUO.js";import"./moment-C5S46NFB.js";const M={class:"top-panel"},U={class:"comment-info"},j=["href"],q={class:"comment"},T=["href"],E=["href"],K={class:"content"},P={class:"time-info"},w={class:"time"},G=["onClick"],J=["href"],Q={class:"video-name"},W={__name:"CommentList",setup(X){const{proxy:s}=F();B();const x=[{label:"评论信息",scopedSlots:"slotComment"},{label:"视频信息",scopedSlots:"slotVideo",width:150}],y=d(),v=d({extHeight:0}),m=d({}),c=d({}),u=async()=>{let i={pageNo:c.value.pageNo,pageSize:c.value.pageSize};Object.assign(i,m.value);let e=await s.Request({url:s.Api.loadComment,params:i});e&&Object.assign(c.value,e.data)},N=i=>{s.Confirm({message:"确定要删除吗？",okfun:async()=>{await s.Request({url:s.Api.delComment,params:{commentId:i}})&&(s.Message.success("删除成功"),u())}})};return(i,e)=>{const I=l("el-input"),V=l("el-form-item"),b=l("el-col"),$=l("el-button"),S=l("el-row"),D=l("el-form"),g=l("el-card"),z=l("Avatar"),H=l("Cover");return C(),h(k,null,[o("div",M,[a(g,null,{default:n(()=>[a(D,{model:m.value,onSubmit:e[1]||(e[1]=R(()=>{},["prevent"]))},{default:n(()=>[a(S,{gutter:10},{default:n(()=>[a(b,{span:5},{default:n(()=>[a(V,{label:"视频"},{default:n(()=>[a(I,{clearable:"",placeholder:"输入视频名称搜索",modelValue:m.value.videoNameFuzzy,"onUpdate:modelValue":e[0]||(e[0]=_=>m.value.videoNameFuzzy=_)},null,8,["modelValue"])]),_:1})]),_:1}),a(b,{span:5},{default:n(()=>[a($,{type:"success",onClick:u},{default:n(()=>e[2]||(e[2]=[f("搜索")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),a(g,{class:"table-data-card"},{default:n(()=>[a(O,{ref_key:"tableInfoRef",ref:y,columns:x,fetch:u,dataSource:c.value,options:v.value,extHeight:v.value.extHeight},{slotComment:n(({index:_,row:t})=>[o("div",U,[o("a",{class:"a-link nick-name",href:`${p(s).webDomain}/user/${t.userId}`,target:"_blank"},[a(z,{avatar:t.avatar},null,8,["avatar"])],8,j),o("div",q,[o("div",null,[o("a",{class:"a-link nick-name",href:`${p(s).webDomain}/user/${t.userId}`,target:"_blank"},r(t.nickName),9,T),t.replyUserId?(C(),h(k,{key:0},[e[3]||(e[3]=f(" 回复@ ")),o("a",{class:"a-link nick-name",href:`${p(s).webDomain}/user/${t.replyUserId}`,target:"_blank"},r(t.replyNickName),9,E),e[4]||(e[4]=f("的评论 "))],64)):A("",!0)]),o("div",K,r(t.content),1),o("div",P,[o("div",w,r(t.postTime),1),o("div",{class:"iconfont icon-delete",onClick:Y=>N(t.commentId)},null,8,G)])])])]),slotVideo:n(({index:_,row:t})=>[o("a",{href:`${p(s).webDomain}/video/${t.videoId}`,target:"_blank",class:"a-link"},[a(H,{source:t.videoCover},null,8,["source"]),o("div",Q,r(t.videoName),1)],8,J)]),_:1},8,["dataSource","options","extHeight"])]),_:1})],64)}}},ye=L(W,[["__scopeId","data-v-4e440fb6"]]);export{ye as default};
