import{_ as S,V as b}from"./Table-DKIv2YqD.js";import{u as N,a as D}from"./vue-router-hI8gbx6m.js";import{_ as I}from"./index-D9sq5B9z.js";import{b as r,c as V,P as n,H as a,o as y,L as m,M as l,u as C,a as f,i as H,ag as L}from"./@vue-JlwsckWB.js";import"./pinia-91x-qzso.js";import"./vue-demi-Dq6ymT-8.js";import"./element-plus-BCXmXNOW.js";import"./lodash-es-DpRhkxuT.js";import"./@vueuse-DS8A98-V.js";import"./@element-plus-Dbr4-WMN.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-Cvt7qOjS.js";import"./artplayer-DYEsUqgO.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DVIT0l11.js";import"./axios-upsvKRUO.js";import"./vue-cookies-DmNBPvI0.js";import"./@fingerprintjs-BlNouByb.js";import"./tslib-BLN2B0TR.js";import"./vue-cropper-BAfMpYow.js";import"./mitt-DJ65BbbF.js";import"./moment-C5S46NFB.js";const R={class:"danmu-panel"},T=["onClick"],w={__name:"DanmuList",setup(M){const{proxy:t}=H();D();const v=N(),u=r(v.query.videoId),x=o=>{u.value=o,p()},g=[{label:"发送者",prop:"nickName",width:150,scopedSlots:"slotNickName"},{label:"播放时间",prop:"time",scopedSlots:"time",width:100},{label:"弹幕内容",prop:"text",scopedSlots:"slotText"},{label:"发送时间",prop:"postTime",width:180},{label:"操作",prop:"operation",width:80,scopedSlots:"slotOperation"}],h=r(),d=r({extHeight:10}),s=r({}),p=async()=>{let o={pageNo:s.value.pageNo,pageSize:s.value.pageSize,videoId:u.value},i=await t.Request({url:t.Api.ucLoadDanmu,params:o});i&&Object.assign(s.value,i.data)},k=o=>{t.Confirm({message:"确定要删除吗？",okfun:async()=>{await t.Request({url:t.Api.ucDelDanmu,params:{danmuId:o}})&&(t.Message.success("删除成功"),p())}})};return(o,i)=>{const _=L("router-link");return y(),V("div",R,[n(b,{onLoadData:x}),n(S,{ref_key:"tableInfoRef",ref:h,columns:g,fetch:p,dataSource:s.value,options:d.value,extHeight:d.value.extHeight},{slotNickName:a(({index:c,row:e})=>[n(_,{target:"_blank",class:"nick-name",to:`/user/${e.userId}`},{default:a(()=>[m(l(e.nickName),1)]),_:2},1032,["to"])]),time:a(({index:c,row:e})=>[m(l(C(t).Utils.convertSecondsToHMS(Math.round(e.time))),1)]),slotOperation:a(({index:c,row:e})=>[f("a",{href:"javascript:void(0)",class:"a-link",onClick:O=>k(e.danmuId)},"删除",8,T)]),slotText:a(({index:c,row:e})=>[f("div",null,l(e.text),1),n(_,{target:"_blank",class:"video-info",to:`/video/${e.videoId}`},{default:a(()=>[m("视频："+l(e.videoName),1)]),_:2},1032,["to"])]),_:1},8,["dataSource","options","extHeight"])])}}},ne=I(w,[["__scopeId","data-v-3056142a"]]);export{ne as default};
