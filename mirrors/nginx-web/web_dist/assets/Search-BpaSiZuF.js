import{b as s,j as V,e as q,c as f,a as i,P as l,H as u,a5 as H,O as N,a4 as B,ag as c,o as v,L as D,C as F,M as L,i as I}from"./@vue-JlwsckWB.js";import{u as A,a as R}from"./vue-router-hI8gbx6m.js";import{u as z}from"./navActionStore-yUvuvR1j.js";import{_ as G,e as K}from"./index-D9sq5B9z.js";import"./pinia-91x-qzso.js";import"./vue-demi-Dq6ymT-8.js";import"./element-plus-BCXmXNOW.js";import"./lodash-es-DpRhkxuT.js";import"./@vueuse-DS8A98-V.js";import"./@element-plus-Dbr4-WMN.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-Cvt7qOjS.js";import"./artplayer-DYEsUqgO.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DVIT0l11.js";import"./axios-upsvKRUO.js";import"./vue-cookies-DmNBPvI0.js";import"./@fingerprintjs-BlNouByb.js";import"./tslib-BLN2B0TR.js";import"./vue-cropper-BAfMpYow.js";import"./mitt-DJ65BbbF.js";import"./moment-C5S46NFB.js";const M={class:"search-body"},O={class:"search-panel"},j={class:"order-btns"},E=["onClick"],P={class:"data-list"},U={__name:"Search",setup($){const{proxy:h}=I(),k=R(),t=A(),a=z(),w=K(),g=s([{name:"综合排序",order:null,orderType:null},{name:"最多播放",order:"play",orderType:0},{name:"最新发布",order:"latest",orderType:1},{name:"最多弹幕",order:"danmu",orderType:2},{name:"最多收藏",order:"collection",orderType:3}]),n=s(t.query.keyword),p=()=>{n.value&&k.push({path:"/search",query:{keyword:n.value,order:m.value}})},m=s(t.query.order),x=r=>{m.value=r.order,p()},S=s(!1),y=s({}),C=async()=>{const r=g.value.find(_=>t.query.order==_.order);let e={pageNo:y.value.pageNo,keyword:t.query.keyword,orderType:r.orderType};S.value=!0;let d=await h.Request({url:h.Api.search,params:e});S.value=!1,d&&(y.value=d.data)};return V(()=>{a.setShowHeader(!1),a.setFixedHeader(!1),a.setFixedCategory(!1),a.setShowCategory(!1),a.setForceFixedHeader(!0)}),q(()=>t.query.keyword,(r,e)=>{r&&(C(),w.addHistory(r))},{immediate:!0,deep:!0}),(r,e)=>{const d=c("el-button"),_=c("el-input"),T=c("VideoItem"),b=c("DataGridList");return v(),f("div",M,[i("div",O,[l(_,{placeholder:"请输入关键字",modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),size:"large",onKeyup:H(p,["enter"])},{prefix:u(()=>e[1]||(e[1]=[i("span",{class:"iconfont icon-search"},null,-1)])),suffix:u(()=>[l(d,{type:"primary",onClick:p,class:"search-btn"},{default:u(()=>e[2]||(e[2]=[D("搜索")])),_:1})]),_:1},8,["modelValue"])]),i("div",j,[(v(!0),f(N,null,B(g.value,o=>(v(),f("div",{class:F(["btn",m.value==o.order?"active":""]),onClick:J=>x(o)},L(o.name),11,E))),256))]),i("div",P,[l(b,{gridCount:6,dataSource:y.value},{default:u(({data:o})=>[l(T,{data:o},null,8,["data"])]),_:1},8,["dataSource"])])])}}},Se=G(U,[["__scopeId","data-v-4bf97423"]]);export{Se as default};
