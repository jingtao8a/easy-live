import{b as T,u as g}from"./vue-router-B5Ds_jdF.js";import{i as x}from"./echarts-xinKxm_4.js";import{_ as k}from"./index-Di0cqdVb.js";import{b as u,s as w,c,P as f,H as v,O as _,n as A,ag as b,o as p,a as e,a4 as I,i as K,C as h,M as m}from"./@vue-o39Kj8Hc.js";import"./tslib-BDyQ-Jie.js";import"./zrender-BN1PI0Cu.js";import"./pinia-DRS-luHF.js";import"./vue-demi-Dq6ymT-8.js";import"./element-plus-DqxZfY1O.js";import"./lodash-es-DpRhkxuT.js";import"./@vueuse-2MWXcMyd.js";import"./@element-plus-B683oq9Q.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-Cvt7qOjS.js";import"./artplayer-DYEsUqgO.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DVIT0l11.js";import"./vue-cookies-DmNBPvI0.js";import"./vue-cropper-B5nAOkqF.js";import"./mitt-DJ65BbbF.js";import"./hls.js-DnSDjNdB.js";import"./artplayer-plugin-danmuku-CU64Le-w.js";import"./axios-upsvKRUO.js";import"./moment-C5S46NFB.js";const R={class:"video-data-list"},S=["onClick"],H={class:"video-data-title"},$={class:"pre-count"},B={class:"total-count"},E={__name:"Home",setup(L){const{proxy:s}=K();T(),g();const i=u([{name:"用户数",icon:"icon-user",totalCountKey:"userCount",preDataType:1,totalCount:0,preCount:0},{name:"播放",icon:"icon-play-solid",totalCountKey:"playCount",preDataType:0,totalCount:0,preCount:0},{name:"评论",icon:"icon-comment-solid",totalCountKey:"commentCount",preDataType:5,totalCount:0,preCount:0},{name:"弹幕",icon:"icon-danmu-solid",totalCountKey:"danmuCount",preDataType:6,totalCount:0,preCount:0},{name:"点赞",icon:"icon-like-solid",totalCountKey:"likeCount",preDataType:2,totalCount:0,preCount:0},{name:"收藏",icon:"icon-collection-solid",totalCountKey:"collectCount",preDataType:3,totalCount:0,preCount:0},{name:"投币",icon:"icon-toubi",totalCountKey:"coinCount",preDataType:4,totalCount:0,preCount:0}]);(async()=>{let a=await s.Request({url:s.Api.getActualTimeStatisticsInfo});if(!a)return;const n=a.data.totalCountInfo,o=a.data.preDayData;i.value.forEach(t=>{t.totalCount=n[t.totalCountKey],t.preCount=o[t.preDataType]?o[t.preDataType]:0})})();const d=u(null),C=w();(()=>{A(()=>{C.value=x(d.value),y()})})();const D=a=>{r.value=a,y()},r=u(i.value[0]),y=async()=>{let a=await s.Request({url:s.Api.getWeekStatisticsInfo,params:{dataType:r.value.preDataType}});if(!a)return;const n=[],o=[];a.data.forEach(l=>{n.push(l.statisticsDate),o.push(l.statisticsCount)});const t={title:{text:`近7天${r.value.name}量`},tooltip:{trigger:"axis"},legend:{data:[r.value.name]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:n}],yAxis:[{type:"value",axisLabel:{formatter:"{value} °C"}}],series:[{name:r.value.name,type:"line",data:o,smooth:!0,itemStyle:{normal:{color:"#ff6699",lineStyle:{color:"#ff6699"}}}}]};C.value.setOption(t,!0)};return(a,n)=>{const o=b("el-card");return p(),c(_,null,[f(o,{class:"box-card"},{default:v(()=>[n[0]||(n[0]=e("div",{slot:"header"},[e("div",{class:"part-title"},"视频数据")],-1)),e("div",R,[(p(!0),c(_,null,I(i.value,t=>(p(),c("div",{class:h(["video-data-item",t.preDataType==r.value.preDataType?"active":""]),onClick:l=>D(t)},[e("div",H,[e("div",{class:h(["name iconfont",t.icon])},m(t.name),3),e("div",$,m(t.preCount),1)]),e("div",B,m(t.totalCount),1)],10,S))),256))])]),_:1}),f(o,{class:"week-data-panel"},{default:v(()=>[e("div",{ref_key:"chartRef",ref:d,class:"data-chart"},null,512)]),_:1})],64)}}},mt=k(E,[["__scopeId","data-v-618a368c"]]);export{mt as default};
