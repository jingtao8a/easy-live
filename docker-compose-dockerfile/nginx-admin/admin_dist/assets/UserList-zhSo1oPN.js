import{b as m,c as h,a as p,P as o,H as t,O,ag as l,o as x,V as T,L as S,M as n,u as j,K as H,i as R}from"./@vue-o39Kj8Hc.js";import{_ as U,a as $}from"./index-Di0cqdVb.js";import{u as D}from"./vue-router-B5Ds_jdF.js";import"./pinia-DRS-luHF.js";import"./vue-demi-Dq6ymT-8.js";import"./element-plus-DqxZfY1O.js";import"./lodash-es-DpRhkxuT.js";import"./@vueuse-2MWXcMyd.js";import"./@element-plus-B683oq9Q.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-Cvt7qOjS.js";import"./artplayer-DYEsUqgO.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DVIT0l11.js";import"./vue-cookies-DmNBPvI0.js";import"./vue-cropper-B5nAOkqF.js";import"./mitt-DJ65BbbF.js";import"./hls.js-DnSDjNdB.js";import"./artplayer-plugin-danmuku-CU64Le-w.js";import"./axios-upsvKRUO.js";import"./moment-C5S46NFB.js";const F={class:"top-panel"},M=["href"],B={key:0},P=["onClick"],q={__name:"UserList",setup(E){const{proxy:i}=R();D();const k={0:"女",1:"男",2:"保密"},C=[{label:"头像",prop:"avatar",width:100,scopedSlots:"slotAvatar"},{label:"昵称",prop:"nickName",width:150,scopedSlots:"slotNickName"},{label:"邮箱",prop:"email",width:150},{label:"出生日期",prop:"birthday",width:150},{label:"加入时间",prop:"joinTime",scopedSlots:"slotJoinTime",width:300},{label:"最后登录IP",prop:"lastLoginIp",width:150},{label:"简介",prop:"personIntroduction"},{label:"硬币数量",prop:"coin",scopedSlots:"slotCoin"},{label:"状态",prop:"status",scopedSlots:"slotStatus"},{label:"操作",prop:"operation",width:80,scopedSlots:"slotOperation"}],N=m(),f=m({extHeight:0}),u=m({}),c=m({}),d=async()=>{let r={pageNo:c.value.pageNo,pageSize:c.value.pageSize};Object.assign(r,u.value);let a=await i.Request({url:i.Api.loadUser,params:r});a&&Object.assign(c.value,a.data)},y=r=>{i.Confirm({message:`确定要${r.status==0?"启用":"禁用"}吗？`,okfun:async()=>{await i.Request({url:i.Api.changeStatus,params:{userId:r.userId,status:r.status==0?1:0}})&&(i.Message.success("操作成功"),d())}})};return(r,a)=>{const V=l("el-input"),v=l("el-form-item"),_=l("el-col"),b=l("el-option"),I=l("el-select"),A=l("el-button"),w=l("el-row"),z=l("el-form"),g=l("el-card"),L=l("Avatar");return x(),h(O,null,[p("div",F,[o(g,null,{default:t(()=>[o(z,{model:u.value,onSubmit:a[2]||(a[2]=T(()=>{},["prevent"]))},{default:t(()=>[o(w,{gutter:10},{default:t(()=>[o(_,{span:5},{default:t(()=>[o(v,{label:"用户昵称"},{default:t(()=>[o(V,{clearable:"",placeholder:"输入用户昵称",modelValue:u.value.nickNameFuzzy,"onUpdate:modelValue":a[0]||(a[0]=s=>u.value.nickNameFuzzy=s)},null,8,["modelValue"])]),_:1})]),_:1}),o(_,{span:5},{default:t(()=>[o(v,{label:"状态",prop:""},{default:t(()=>[o(I,{clearable:"",placeholder:"请选择状态",modelValue:u.value.status,"onUpdate:modelValue":a[1]||(a[1]=s=>u.value.status=s)},{default:t(()=>[o(b,{value:0,label:"禁用"}),o(b,{value:1,label:"启用"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(_,{span:5},{default:t(()=>[o(A,{type:"primary",onClick:d},{default:t(()=>a[3]||(a[3]=[S("搜索")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),o(g,{class:"table-data-card"},{default:t(()=>[o($,{ref_key:"tableInfoRef",ref:N,columns:C,fetch:d,dataSource:c.value,options:f.value,extHeight:f.value.extHeight},{slotAvatar:t(({index:s,row:e})=>[o(L,{avatar:e.avatar},null,8,["avatar"])]),slotNickName:t(({index:s,row:e})=>[p("a",{class:"nick-name",href:`${j(i).webDomain}/user/${e.userId}`},n(e.nickName),9,M),e.sex?(x(),h("span",B,"("+n(k[e.sex])+")",1)):H("",!0)]),slotJoinTime:t(({index:s,row:e})=>[p("div",null,"加入时间："+n(e.joinTime),1),p("div",null,"最后登录时间："+n(e.lastLoginTime),1)]),slotCoin:t(({index:s,row:e})=>[p("div",null,"当前:"+n(e.currentCoinCount),1),p("div",null,"总数:"+n(e.totalCoinCount),1)]),slotStatus:t(({index:s,row:e})=>[S(n(e.status==0?"禁用":"启用"),1)]),slotOperation:t(({index:s,row:e})=>[p("a",{href:"javascript:void(0)",class:"a-link",onClick:J=>y(e)},n(e.status==0?"启用":"禁用"),9,P)]),_:1},8,["dataSource","options","extHeight"])]),_:1})],64)}}},be=U(q,[["__scopeId","data-v-39c7d2a6"]]);export{be as default};
