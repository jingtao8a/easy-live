import{b as m,c as w,P as s,H as a,ag as c,o as V,a as n,a5 as y,L as b,i as h}from"./@vue-o39Kj8Hc.js";import{u as x,b as R}from"./vue-router-B5Ds_jdF.js";import{m as q}from"./js-md5-Ddb6WJu6.js";import"./artplayer-DYEsUqgO.js";const z={class:"account-panel"},K={class:"check-code-panel"},A=["src"],L={__name:"Account",setup(B){const{proxy:t}=h(),v=x();R();const d=m({}),p=async()=>{let u=await t.Request({url:t.Api.checkCode});u&&(d.value=u.data)};p();const o=m({}),f=m(),C={account:[{required:!0,message:"请输入账号"}],password:[{required:!0,message:"请输入密码"}],checkCode:[{required:!0,message:"请输入图片验证码"}]},k=()=>{f.value.validate(async u=>{if(!u)return;let e={};Object.assign(e,o.value),e.checkCodeKey=d.value.checkCodeKey,e.password=q(e.password);let l=await t.Request({url:t.Api.login,params:e,errorCallback:()=>{p()}});l&&(v.push("/home"),t.Message.success("登录成功"),t.VueCookies.set("account",l.data))})};return(u,e)=>{const l=c("el-input"),i=c("el-form-item"),_=c("el-button"),g=c("el-form");return V(),w("div",z,[s(g,{class:"login-panel",model:o.value,rules:C,ref_key:"formDataRef",ref:f},{default:a(()=>[e[8]||(e[8]=n("div",{class:"login-title"},"登录",-1)),s(i,{prop:"email"},{default:a(()=>[s(l,{size:"large",clearable:"",placeholder:"请输入账号",modelValue:o.value.account,"onUpdate:modelValue":e[0]||(e[0]=r=>o.value.account=r),maxLength:"150"},{prefix:a(()=>e[4]||(e[4]=[n("span",{class:"iconfont icon-account"},null,-1)])),_:1},8,["modelValue"])]),_:1}),s(i,{prop:"password"},{default:a(()=>[s(l,{"show-password":"",size:"large",placeholder:"请输入密码",modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.password=r)},{prefix:a(()=>e[5]||(e[5]=[n("span",{class:"iconfont icon-password"},null,-1)])),_:1},8,["modelValue"])]),_:1}),s(i,{prop:"checkCode"},{default:a(()=>[n("div",K,[s(l,{size:"large",placeholder:"请输入验证码",modelValue:o.value.checkCode,"onUpdate:modelValue":e[2]||(e[2]=r=>o.value.checkCode=r),onKeyup:y(k,["enter"])},{prefix:a(()=>e[6]||(e[6]=[n("span",{class:"iconfont icon-checkcode"},null,-1)])),_:1},8,["modelValue"]),n("img",{src:d.value.checkCode,class:"check-code",onClick:e[3]||(e[3]=r=>p())},null,8,A)])]),_:1}),s(_,{type:"primary",size:"large",class:"op-btn",onClick:k},{default:a(()=>e[7]||(e[7]=[b(" 登录 ")])),_:1})]),_:1},8,["model"])])}}};export{L as default};
