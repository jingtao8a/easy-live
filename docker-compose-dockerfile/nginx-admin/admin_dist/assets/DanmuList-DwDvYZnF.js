import{b as c,c as C,a as r,P as a,H as e,O as I,ag as l,o as V,V as z,L as g,M as u,u as _,i as H}from"./@vue-o39Kj8Hc.js";import{_ as O,a as $}from"./index-Di0cqdVb.js";import{u as M}from"./vue-router-B5Ds_jdF.js";import"./pinia-DRS-luHF.js";import"./vue-demi-Dq6ymT-8.js";import"./element-plus-DqxZfY1O.js";import"./lodash-es-DpRhkxuT.js";import"./@vueuse-2MWXcMyd.js";import"./@element-plus-B683oq9Q.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-Cvt7qOjS.js";import"./artplayer-DYEsUqgO.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DVIT0l11.js";import"./vue-cookies-DmNBPvI0.js";import"./vue-cropper-B5nAOkqF.js";import"./mitt-DJ65BbbF.js";import"./hls.js-DnSDjNdB.js";import"./artplayer-plugin-danmuku-CU64Le-w.js";import"./axios-upsvKRUO.js";import"./moment-C5S46NFB.js";const R={class:"top-panel"},T=["href"],F=["onClick"],L=["href"],j={__name:"DanmuList",setup(B){const{proxy:s}=H();M();const h=[{label:"发送者",prop:"nickName",width:150,scopedSlots:"slotNickName"},{label:"播放时间",prop:"time",scopedSlots:"time",width:100},{label:"弹幕内容",prop:"text",scopedSlots:"slotText"},{label:"发送时间",prop:"postTime",width:180},{label:"操作",prop:"operation",width:80,scopedSlots:"slotOperation"}],x=c(),f=c({extHeight:0}),p=c({}),m=c({}),d=async()=>{let n={pageNo:m.value.pageNo,pageSize:m.value.pageSize};Object.assign(n,p.value);let t=await s.Request({url:s.Api.loadDanmu,params:n});t&&Object.assign(m.value,t.data)},k=n=>{s.Confirm({message:"确定要删除吗？",okfun:async()=>{await s.Request({url:s.Api.delDanmu,params:{danmuId:n}})&&(s.Message.success("删除成功"),d())}})};return(n,t)=>{const N=l("el-input"),S=l("el-form-item"),v=l("el-col"),D=l("el-button"),w=l("el-row"),y=l("el-form"),b=l("el-card");return V(),C(I,null,[r("div",R,[a(b,null,{default:e(()=>[a(y,{model:p.value,onSubmit:t[1]||(t[1]=z(()=>{},["prevent"]))},{default:e(()=>[a(w,{gutter:10},{default:e(()=>[a(v,{span:5},{default:e(()=>[a(S,{label:"视频"},{default:e(()=>[a(N,{clearable:"",placeholder:"输入视频名称搜索",modelValue:p.value.videoNameFuzzy,"onUpdate:modelValue":t[0]||(t[0]=i=>p.value.videoNameFuzzy=i)},null,8,["modelValue"])]),_:1})]),_:1}),a(v,{span:5},{default:e(()=>[a(D,{type:"primary",onClick:d},{default:e(()=>t[2]||(t[2]=[g("搜索")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),a(b,{class:"table-data-card"},{default:e(()=>[a($,{ref_key:"tableInfoRef",ref:x,columns:h,fetch:d,dataSource:m.value,options:f.value,extHeight:f.value.extHeight},{slotNickName:e(({index:i,row:o})=>[r("a",{target:"_blank",class:"nick-name",href:`${_(s).webDomain}/user/${o.userId}`},u(o.nickName),9,T)]),time:e(({index:i,row:o})=>[g(u(_(s).Utils.convertSecondsToHMS(Math.round(o.time))),1)]),slotOperation:e(({index:i,row:o})=>[r("a",{href:"javascript:void(0)",class:"a-link",onClick:q=>k(o.danmuId)},"删除",8,F)]),slotText:e(({index:i,row:o})=>[r("div",null,u(o.text),1),r("a",{target:"_blank",class:"video-info",href:`${_(s).webDomain}/video/${o.videoId}`},"视频："+u(o.videoName),9,L)]),_:1},8,["dataSource","options","extHeight"])]),_:1})],64)}}},ue=O(j,[["__scopeId","data-v-ca4d3c98"]]);export{ue as default};
