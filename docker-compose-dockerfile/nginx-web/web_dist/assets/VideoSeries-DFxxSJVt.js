import{l as x}from"./vue-draggable-plus-N5Bk0sze.js";import{V as N}from"./VideoSeriesEdit-OevDDw3A.js";import{u as w,a as B}from"./vue-router-hI8gbx6m.js";import{_ as D,a as E}from"./index-D9sq5B9z.js";import{l as L,b as f,c as n,a as r,P as u,H,u as _,G as U,K as S,O as m,o as i,a4 as $,M as I,i as b,ag as V}from"./@vue-JlwsckWB.js";import"./pinia-91x-qzso.js";import"./vue-demi-Dq6ymT-8.js";import"./element-plus-BCXmXNOW.js";import"./lodash-es-DpRhkxuT.js";import"./@vueuse-DS8A98-V.js";import"./@element-plus-Dbr4-WMN.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-Cvt7qOjS.js";import"./artplayer-DYEsUqgO.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DVIT0l11.js";import"./axios-upsvKRUO.js";import"./vue-cookies-DmNBPvI0.js";import"./@fingerprintjs-BlNouByb.js";import"./tslib-BLN2B0TR.js";import"./vue-cropper-BAfMpYow.js";import"./mitt-DJ65BbbF.js";import"./moment-C5S46NFB.js";const j={class:"video-list-panel"},q=["onClick"],A={class:"cover"},M={key:0,class:"move-handler iconfont icon-move"},F={class:"list-name"},G={class:"create-time"},K={__name:"VideoSeries",setup(O){const{proxy:a}=b(),d=w(),g=B(),h=E(),c=L(()=>h.userInfo.userId==d.params.userId),o=f([]),p=async()=>{let e=await a.Request({url:a.Api.uHomeSeriesLoadVideoSeries,params:{userId:d.params.userId}});e&&(o.value=e.data,c.value&&o.value.unshift({seriesId:"add"}))};p();const v=f(),k=()=>{v.value.show()},y=async()=>{let e=o.value.map(l=>l.seriesId);e.splice(0,1),await a.Request({url:a.Api.uHomeSeriesChangeVideoSeriesSort,params:{seriesIds:e.join(",")}})&&a.Message.success("排序成功")},C=e=>{g.push(`/user/${d.params.userId}/series/${e.seriesId}`)};return(e,t)=>{const l=V("Cover"),R=V("NoData");return i(),n(m,null,[r("div",j,[t[2]||(t[2]=r("div",{class:"video-title"},"视频列表",-1)),u(_(x),{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=s=>o.value=s),onUpdate:y,handle:".move-handler",class:"video-list",draggable:".list-item"},{default:H(()=>[(i(!0),n(m,null,$(o.value,(s,P)=>(i(),n(m,{key:s.seriesId},[s.seriesId=="add"?(i(),n("div",{key:0,class:"video-item-add",onClick:k},t[1]||(t[1]=[r("div",{class:"iconfont icon-add"},null,-1),r("div",{class:"add-info"},"新建视频列表",-1)]))):(i(),n("div",{key:1,class:"list-item",onClick:T=>C(s)},[r("div",A,[c.value?(i(),n("div",M)):S("",!0),u(l,{source:s.cover},null,8,["source"])]),r("div",F,I(s.seriesName),1),r("div",G,I(_(a).Utils.formatDate(s.updateTime)),1)],8,q))],64))),128))]),_:1},8,["modelValue"]),o.value.length==0?(i(),U(R,{key:0,msg:"暂无视频列表"})):S("",!0)]),u(N,{ref_key:"videoSeriesEditRef",ref:v,onReload:p},null,512)],64)}}},Ve=D(K,[["__scopeId","data-v-e095c63f"]]);export{Ve as default};
